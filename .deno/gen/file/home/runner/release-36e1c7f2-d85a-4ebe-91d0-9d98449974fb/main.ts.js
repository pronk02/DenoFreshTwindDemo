/// <reference no-default-lib="true" />
/// <reference lib="dom" />
/// <reference lib="dom.asynciterable" />
/// <reference lib="deno.ns" />
/// <reference lib="deno.unstable" />
import { start } from "$fresh/server.ts";
import manifest from "./fresh.gen.ts";
import { config, setup } from "@twind";
import { virtualSheet } from "twind/sheets";
const sheet = virtualSheet();
sheet.reset();
setup({
    ...config,
    sheet
});
function render(ctx, render) {
    const snapshot = ctx.state.get("twind");
    sheet.reset(snapshot || undefined);
    render();
    ctx.styles.splice(0, ctx.styles.length, ...sheet.target);
    const newSnapshot = sheet.reset();
    ctx.state.set("twind", newSnapshot);
}
await start(manifest, {
    render
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9ydW5uZXIvcmVsZWFzZS0zNmUxYzdmMi1kODVhLTRlYmUtOTFkMC05ZDk4NDQ5OTc0ZmIvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBuby1kZWZhdWx0LWxpYj1cInRydWVcIiAvPlxuLy8vIDxyZWZlcmVuY2UgbGliPVwiZG9tXCIgLz5cbi8vLyA8cmVmZXJlbmNlIGxpYj1cImRvbS5hc3luY2l0ZXJhYmxlXCIgLz5cbi8vLyA8cmVmZXJlbmNlIGxpYj1cImRlbm8ubnNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgbGliPVwiZGVuby51bnN0YWJsZVwiIC8+XG5cbmltcG9ydCB7IElubmVyUmVuZGVyRnVuY3Rpb24sIFJlbmRlckNvbnRleHQsIHN0YXJ0IH0gZnJvbSBcIiRmcmVzaC9zZXJ2ZXIudHNcIjtcbmltcG9ydCBtYW5pZmVzdCBmcm9tIFwiLi9mcmVzaC5nZW4udHNcIjtcblxuaW1wb3J0IHsgY29uZmlnLCBzZXR1cCB9IGZyb20gXCJAdHdpbmRcIjtcbmltcG9ydCB7IHZpcnR1YWxTaGVldCB9IGZyb20gXCJ0d2luZC9zaGVldHNcIjtcblxuY29uc3Qgc2hlZXQgPSB2aXJ0dWFsU2hlZXQoKTtcbnNoZWV0LnJlc2V0KCk7XG5zZXR1cCh7IC4uLmNvbmZpZywgc2hlZXQgfSk7XG5cbmZ1bmN0aW9uIHJlbmRlcihjdHg6IFJlbmRlckNvbnRleHQsIHJlbmRlcjogSW5uZXJSZW5kZXJGdW5jdGlvbikge1xuICBjb25zdCBzbmFwc2hvdCA9IGN0eC5zdGF0ZS5nZXQoXCJ0d2luZFwiKSBhcyB1bmtub3duW10gfCBudWxsO1xuICBzaGVldC5yZXNldChzbmFwc2hvdCB8fCB1bmRlZmluZWQpO1xuICByZW5kZXIoKTtcbiAgY3R4LnN0eWxlcy5zcGxpY2UoMCwgY3R4LnN0eWxlcy5sZW5ndGgsIC4uLihzaGVldCkudGFyZ2V0KTtcbiAgY29uc3QgbmV3U25hcHNob3QgPSBzaGVldC5yZXNldCgpO1xuICBjdHguc3RhdGUuc2V0KFwidHdpbmRcIiwgbmV3U25hcHNob3QpO1xufVxuXG5hd2FpdCBzdGFydChtYW5pZmVzdCwgeyByZW5kZXIgfSk7XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsdUNBQXVDO0FBQ3ZDLDJCQUEyQjtBQUMzQix5Q0FBeUM7QUFDekMsK0JBQStCO0FBQy9CLHFDQUFxQztBQUVyQyxTQUE2QyxLQUFLLFFBQVEsa0JBQWtCLENBQUM7QUFDN0UsT0FBTyxRQUFRLE1BQU0sZ0JBQWdCLENBQUM7QUFFdEMsU0FBUyxNQUFNLEVBQUUsS0FBSyxRQUFRLFFBQVEsQ0FBQztBQUN2QyxTQUFTLFlBQVksUUFBUSxjQUFjLENBQUM7QUFFNUMsTUFBTSxLQUFLLEdBQUcsWUFBWSxFQUFFLEFBQUM7QUFDN0IsS0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO0FBQ2QsS0FBSyxDQUFDO0lBQUUsR0FBRyxNQUFNO0lBQUUsS0FBSztDQUFFLENBQUMsQ0FBQztBQUU1QixTQUFTLE1BQU0sQ0FBQyxHQUFrQixFQUFFLE1BQTJCLEVBQUU7SUFDL0QsTUFBTSxRQUFRLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLEFBQW9CLEFBQUM7SUFDNUQsS0FBSyxDQUFDLEtBQUssQ0FBQyxRQUFRLElBQUksU0FBUyxDQUFDLENBQUM7SUFDbkMsTUFBTSxFQUFFLENBQUM7SUFDVCxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxNQUFNLEtBQUssQUFBQyxLQUFLLENBQUUsTUFBTSxDQUFDLENBQUM7SUFDM0QsTUFBTSxXQUFXLEdBQUcsS0FBSyxDQUFDLEtBQUssRUFBRSxBQUFDO0lBQ2xDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsQ0FBQztDQUNyQztBQUVELE1BQU0sS0FBSyxDQUFDLFFBQVEsRUFBRTtJQUFFLE1BQU07Q0FBRSxDQUFDLENBQUMifQ==